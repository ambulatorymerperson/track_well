{% extends "base.html" %}
<head>
    <title></title>
</head>
<body>
{% block content %}

 
<br><br>
<h1 id="name">{{ name }}'s stats</h1><br>

<br>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
    <script src="//rawgithub.com/phpepe/highcharts-regression/master/highcharts-regression.js"> </script>

<div class="container">
    <div class="row">
        <div class="col-lg-8">
            <div id="same_day_insight"></div>
            <div id="chart-A" class="chart">
            </div> <!-- Container for Chart A -->
            <div class="spacer"></div><div id="text"></div>
            <div id="next_day_insight"></div>
            <div id="chart-B" class="chart"></div> <!-- Container for Chart B -->
        </div>
    </div>
</div>            

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
"use strict";

let screentime = {{ screentime|tojson|safe }};
let sleep = {{ sleep|tojson|safe }};
let exercise = {{ exercise|tojson|safe }};
let screen_points = {{ screen_points|tojson|safe }};
let sleep_points = {{ sleep_points|tojson|safe }};
let exercise_points = {{ exercise_points|tojson|safe }};
let next_day_variable = {{ biggest_next_day_impact|tojson|safe }};
let next_day_insight = {{ next_day_insight|tojson|safe }};
let same_day_message = {{ same_day_message|tojson|safe }};
 


$("#same_day_insight").html(same_day_message);

$(function () { 
   let  myChart = Highcharts.chart('chart-A', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'What You Do and How You Feel When You Do It'
        },
        xAxis: {
            title: {
                text: 'habits'
            }
        },
        yAxis: {
            title: {
                text: 'well-being'
            }
        },
        legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                backgroundColor: '#FFFFFF',
                borderWidth: 1
            },

   
        series: [
           {regression: true ,
            regressionSettings: {
                type: 'polynomial',
                color:  'rgba(45, 90, 255, .9)',
                name: "%eq | r2: %r" 
            },
            name: 'sleep',
            color: 'rgba(223, 83, 83, .5)',
            data: sleep 
            },

            {regression: true ,
            regressionSettings: {
                type: 'polynomial',
                color:  'rgba(40, 100, 2, .9)',
                name: "%eq | r2: %r" 
            },
            
            name: 'exercise',
            color: 'rgba(223, 83, 83, .5)',
            data: exercise 
            },

            {regression: true ,
            regressionSettings: {
                type: 'polynomial',
                color:  'rgba(60, 100, 2, 10)',
                name: "%eq | r2: %r" 
            },
            
            name: 'screentime',
            color: 'rgba(223, 90, 40, .5)',
            data: screentime 
            }
                    ] 
    });



});

$('#text').html(next_day_variable);
$('#text').append(' tends to have the biggest impact on how you feel the <strong>next</strong> day.');
$('#next_day_insight').html(next_day_insight);


$(function () { 
   let  myChartNextDay = Highcharts.chart('chart-B', {
        chart: {
            type: 'scatter',
            zoomType: 'xy'
        },
        title: {
            text: 'Behaviors & How You Feel the Next Day'
        },
        xAxis: {
            title: {
                text: 'habits'
            }
        },
        yAxis: {
            title: {
                text: 'well-being'
            }
        },
        legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                backgroundColor: '#FFFFFF',
                borderWidth: 1
            },

   
        series: [
           {regression: true ,
            regressionSettings: {
                type: 'polynomial',
                color:  'rgba(45, 90, 255, .9)',
                name: "%eq | r2: %r" 
            },
            name: 'sleep',
            color: 'rgba(223, 83, 83, .5)',
            data: sleep_points 
            },

            {regression: true ,
            regressionSettings: {
                type: 'polynomial',
                color:  'rgba(40, 100, 2, .9)',
                name: "%eq | r2: %r" 
            },
            
            name: 'exercise',
            color: 'rgba(223, 83, 83, .5)',
            data: exercise_points 
            },

            {regression: true ,
            regressionSettings: {
                type: 'polynomial',
                color:  'rgba(60, 100, 2, 10)',
                name: "%eq | r2: %r" 
            },
            
            name: 'screentime',
            color: 'rgba(223, 90, 40, .5)',
            data: screen_points
            }
                    ] 
    });



});



</script>

    <div>

</div>
{% endblock %}
</body>
</html>